@page "/"
@inject NavigationManager Nav

<!-- Hero -->
<MudContainer MaxWidth="MaxWidth.False" Class="mb-4">
    <MudGrid Spacing="4">
        <!-- Left: copy -->
        <MudItem xs="12" md="6">
            <MudText Typo="Typo.h3">Shadowrun GM</MudText>
            <MudText Typo="Typo.subtitle1">
                A focused GM control panel for planning runs, tracking scenes, and keeping rules at your fingertips.
            </MudText>

            <MudStack Row AlignItems="AlignItems.Center" Justify="Justify.FlexStart" Class="mt-4">
                <MudButton Color="Color.Primary" Variant="Variant.Filled" Size="Size.Large" OnClick="@(() => Nav.NavigateTo("/runs/new"))">
                    Start a New Run
                </MudButton>
                <MudButton Color="Color.Primary" Variant="Variant.Outlined" OnClick="@(() => Nav.NavigateTo("/runs"))">
                    Browse Runs
                </MudButton>
            </MudStack>

            <MudStack Row AlignItems="AlignItems.Center" Justify="Justify.FlexStart" Spacing="1">
                <MudCheckBox @bind-Value="_quickStartOpen"></MudCheckBox>
                <MudText Typo="Typo.body2">Show quick-start on open</MudText>
            </MudStack>
        </MudItem>

        <!-- Right: quick-start -->
        <MudItem xs="12" md="6">
            <MudPaper Elevation="0" Class="pa-4">
                <MudStack Spacing="2">
                    <MudText Typo="Typo.h6">Quick-Start</MudText>

                    <MudText Typo="Typo.body2">
                        Spin up a one-shot in seconds. Choose a locale, a faction twist, and difficulty.
                    </MudText>

                    <MudStack Row AlignItems="AlignItems.Center" Justify="Justify.FlexStart" Spacing="2">
                        <MudSelect T="string" Label="Locale" Value="_qsLocale" ValueChanged="@(v => _qsLocale = v)">
                            <MudSelectItem Value="@("Redmond Barrens")" />
                            <MudSelectItem Value="@("Downtown Seattle")" />
                            <MudSelectItem Value="@("Puyallup")" />
                        </MudSelect>

                        <MudSelect T="string" Label="Twist" Value="_qsTwist" ValueChanged="@(v => _qsTwist = v)">
                            <MudSelectItem Value="@("Corporate double-cross")" />
                            <MudSelectItem Value="@("Gang turf war")" />
                            <MudSelectItem Value="@("Awakened anomaly")" />
                        </MudSelect>

                        <MudSelect T="string" Label="Difficulty" Value="_qsDifficulty" ValueChanged="@(v => _qsDifficulty = v)">
                            <MudSelectItem Value="@("Easy")" />
                            <MudSelectItem Value="@("Standard")" />
                            <MudSelectItem Value="@("Hard")" />
                        </MudSelect>
                    </MudStack>

                    <MudStack Row AlignItems="AlignItems.Center" Justify="Justify.FlexStart" Spacing="1">
                        <MudButton Color="Color.Primary" Variant="Variant.Filled" Size="Size.Large" OnClick="@GenerateQuickStart">
                            Generate
                        </MudButton>
                        <MudText Typo="Typo.caption">@_qsStatus</MudText>
                    </MudStack>
                </MudStack>
            </MudPaper>
        </MudItem>
    </MudGrid>
</MudContainer>

<!-- Cinematic strip (slow carousel) -->
<MudContainer MaxWidth="MaxWidth.False" Class="my-8">
    <MudPaper Elevation="2">
        <MudCarousel TData="object"
                     AutoCycle="true"
                     AutoCycleTime="TimeSpan.FromSeconds(7)"
                     ShowBullets="true"
                     ShowArrows="true"
                     class="hero-carousel">

            <MudCarouselItem>
                <img class="hero-img" src="images/landing/hero-1.png" alt="" loading="lazy" />
            </MudCarouselItem>

            <MudCarouselItem>
                <img class="hero-img" src="images/landing/hero-2.png" alt="" loading="lazy" />
            </MudCarouselItem>

            <MudCarouselItem>
                <img class="hero-img" src="images/landing/hero-3.png" alt="" loading="lazy" />
            </MudCarouselItem>
        </MudCarousel>
    </MudPaper>
</MudContainer>

<!-- Recent campaigns + quick refs -->
<MudContainer MaxWidth="MaxWidth.Large" Class="my-4">
    <MudGrid Spacing="4">
        <MudItem xs="12" md="6">
            <MudText Typo="Typo.h6" Class="my-2">Recent Campaigns</MudText>
            <MudPaper Elevation="1" Class="pa-0">
                <MudList T="string" Dense="true" Class="mt-2">
                    @foreach (var campaign in _recentCampaigns )
                    {
                        <MudListItem Icon="@Icons.Material.Outlined.Description">
                            <MudStack Row AlignItems="AlignItems.Center">
                                @campaign
                                <MudSpacer />
                                <MudButton Size="Size.Small"
                                           Variant="Variant.Outlined"
                                           Color="Color.Primary"
                                           OnClick="@(() => Nav.NavigateTo($"/campaign-hub/{Uri.EscapeDataString(campaign)}"))">
                                    Open
                                </MudButton>
                            </MudStack>
                        </MudListItem>

                        if (campaign != _recentCampaigns.Last())
                        {
                            <MudDivider />
                        }
                    }
                </MudList>
            </MudPaper>
        </MudItem>

        <MudItem xs="12" md="6">
            <MudText Typo="Typo.h6" Class="my-2">Quick Reference</MudText>
            <MudPaper Elevation="1">
                <MudList T="string" Dense="true" Class="mt-2">
                    @foreach (var refItem in _quickRefs)
                    {
                        <MudListItem Icon="@Icons.Material.Outlined.MenuBook">
                            <MudStack Row AlignItems="AlignItems.Center">
                                @refItem
                                <MudSpacer />
                                <MudButton Size="Size.Small"
                                           Variant="Variant.Text"
                                           Color="Color.Primary"
                                           OnClick="@(()=> _snackbarOpen = true)">
                                    View
                                </MudButton>
                            </MudStack>
                        </MudListItem>

                        if (refItem != _quickRefs.Last())
                        {
                            <MudDivider />
                        }
                    }
                </MudList>
            </MudPaper>
        </MudItem>
    </MudGrid>
</MudContainer>

<!-- Bottom CTA -->
<MudContainer MaxWidth="MaxWidth.Large" Class="my-8">
    <MudPaper Elevation="0" Class="pa-8">
        <MudStack Spacing="1" AlignItems="AlignItems.Center" Justify="Justify.Center">
            <MudText Typo="Typo.h5">Ready to roll initiative?</MudText>
            <MudText Typo="Typo.body2">Kick off your next campaign and keep the table humming.</MudText>
            <MudStack Row AlignItems="AlignItems.Center" Justify="Justify.Center" Class="mt-4">
                <MudButton Color="Color.Primary" Variant="Variant.Filled" Size="Size.Large" OnClick="@(() => Nav.NavigateTo("/campaign-hub/create"))">
                    Create Campaign
                </MudButton>
                <MudButton Color="Color.Secondary" Variant="Variant.Outlined" OnClick="@(() => Nav.NavigateTo("/campaign-hub"))">
                    Browse Campaigns
                </MudButton>
            </MudStack>
        </MudStack>
    </MudPaper>
</MudContainer>

@code {
    // Quick-start UI state (mock only)
    private bool _quickStartOpen = true;
    private string _qsLocale = "Redmond Barrens";
    private string _qsTwist = "Corporate double-cross";
    private string _qsDifficulty = "Standard";
    private string _qsStatus = string.Empty;

    // Mock data for lists
    private readonly List<string> _recentCampaigns  =
    [
        "Ghosts in the Barrens",
        "The Neon Heist",
        "Black Lace, Red Tape",
        "Chrome & Shadows",
        "Datajack Down"
    ];

    private readonly List<string> _quickRefs =
    [
        "Opposed Tests & Dice Pools",
        "Damage Types & Soak",
        "Matrix Actions (Common)",
        "Vehicle Chase Beats"
    ];

    private void GenerateQuickStart()
    {
        _qsStatus = $"Seeded: {_qsLocale} • {_qsTwist} • {_qsDifficulty}";
    }

    private bool _snackbarOpen;
}
